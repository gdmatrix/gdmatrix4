<?xml version="1.0" encoding="UTF-8"?>
<module
  xmlns="http://schema.gdmatrix.org"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://schema.gdmatrix.org module.xsd"
  name="survey"
  namespace="http://survey.matrix.org/"
  title="Survey manager"
  manager="SurveyManager"
  version="1.0"
  status="REVISION"
  authors="Jordi LÃ³pez">

  <attribute name="jaxws.wsdlLocation" value="/services/survey?wsdl" />
  <attribute name="jaxrs.path" value="/survey" />

  <imports>
    <import prefix="mx"
      namespace="http://base.matrix.org/"
     location="matrix.xsd" />
  </imports>

  <types>

    <entity name="Survey">
      <identifier name="surveyId">
      </identifier>
      <property name="text" type="xs:string" minOccurs="0">
      </property>
      <property name="open" type="xs:boolean">
      </property>
      <property name="answerList" type="survey:AnswerList" minOccurs="0">
      </property>
      <property name="voteCount" type="xs:int">
      </property>
    </entity>

    <entity name="Answer">
      <identifier name="answerId">
      </identifier>
      <property name="text" type="xs:string" minOccurs="0">
      </property>
      <property name="voteCount" type="xs:int">
      </property>
    </entity>

    <struct name="SurveyMetaData">
      <property name="surveyTextMaxSize" type="xs:int">
      </property>
      <property name="answerTextMaxSize" type="xs:int">
      </property>
    </struct>

    <struct name="AnswerList">
      <property name="answerList" type="survey:Answer" minOccurs="0"
        maxOccurs="unbounded" nillable="true">
      </property>
    </struct>

    <struct name="SurveyTable">
      <property name="surveyViewList" type="survey:SurveyView"
        minOccurs="0" maxOccurs="unbounded" nillable="true">
      </property>
    </struct>

    <struct name="SurveyView">
      <property name="surveyId" type="xs:string" minOccurs="0">
      </property>
      <property name="text" type="xs:string" minOccurs="0">
      </property>
      <property name="open" type="xs:boolean">
      </property>
      <property name="startDay" type="xs:string" minOccurs="0">
      </property>
      <property name="voteCount" type="xs:int">
      </property>
    </struct>
  </types>

  <operations>

    <operation name="getSurveyMetaData">
      <response name="surveyMetaData" type="survey:SurveyMetaData">
      </response>
    </operation>

    <operation name="storeSurvey">
      <parameter name="text" type="xs:string">
      </parameter>
      <parameter name="answers" type="xs:string" minOccurs="0"
        maxOccurs="unbounded" nillable="true">
      </parameter>
      <response name="return" type="xs:string">
      </response>
    </operation>

    <operation name="openSurvey">
      <parameter name="surveyId" type="xs:string">
      </parameter>
    </operation>

    <operation name="closeSurvey">
      <parameter name="surveyId" type="xs:string">
      </parameter>
    </operation>

    <operation name="voteSurvey">
      <parameter name="surveyId" type="xs:string">
      </parameter>
      <parameter name="answerId" type="xs:string">
      </parameter>
    </operation>

    <operation name="loadSurvey">
      <parameter name="document" type="xs:string">
      </parameter>
      <response name="survey" type="survey:Survey">
      </response>
    </operation>

    <operation name="findSurveys">
      <response name="surveyTable" type="survey:SurveyTable">
      </response>
    </operation>
  </operations>
</module>
